property(parked_on, attribute(none, car), attribute(none, street), box0, box5).
property(has, attribute(none, car), attribute(none, window), box0, box2).
property(in_front, attribute(none, car), attribute(none, building), box0, box3).
property(none, attribute(none, car), attribute(none, none), box0, box4).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(has, attribute(none, car), attribute(none, window), box0, box2).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(parked_on, attribute(none, car), attribute(none, bus), box1, box8).
property(has, attribute(none, car), attribute(none, window), box0, box2).
property(in_front, attribute(none, car), attribute(none, building), box1, box3).
property(none, attribute(none, car), attribute(none, none), box0, box4).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, car), attribute(none, street), box1, box5).
property(parked_on, attribute(none, car), attribute(none, bus), box1, box8).
property(has, attribute(none, car), attribute(none, window), box0, box2).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, window), attribute(none, bus), box9, box8).
property(on, attribute(none, window), attribute(none, car), box2, box0).
property(on, attribute(none, window), attribute(none, none), box2, box3).
property(on, attribute(none, window), attribute(none, wheel), box2, box4).
property(on, attribute(none, window), attribute(none, none), box2, box3).
property(on, attribute(none, window), attribute(none, road), box9, box6).
property(on, attribute(none, window), attribute(none, bus), box9, box8).
property(on, attribute(none, window), attribute(none, none), box2, box3).
property(on, attribute(none, window), attribute(none, street), box2, box5).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(behind, attribute(none, building), attribute(none, bus), box3, box8).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(behind, attribute(none, building), attribute(none, street), box3, box5).
property(in, attribute(none, building), attribute(none, background), box3, box8).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(on, attribute(none, wheel), attribute(none, car), box4, box0).
property(on, attribute(none, wheel), attribute(none, motorcycle), box4, box7).
property(has, attribute(none, wheel), attribute(none, window), box4, box7).
property(on, attribute(none, wheel), attribute(none, car), box4, box0).
property(on, attribute(none, tire), attribute(none, street), box4, box5).
property(on, attribute(none, tire), attribute(none, street), box4, box5).
property(on, attribute(none, wheel), attribute(none, car), box4, box0).
property(has, attribute(none, wheel), attribute(none, window), box4, box7).
property(on, attribute(none, wheel), attribute(none, street), box4, box5).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, car), attribute(none, street), box0, box5).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, street), box3, box5).
property(has, attribute(none, street), attribute(none, street), box7, box7).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, window), box3, box2).
property(has, attribute(none, building), attribute(none, street), box3, box5).
property(on, attribute(none, line), attribute(none, bus), box6, box8).
property(on, attribute(none, line), attribute(none, road), box6, box5).
property(has, attribute(none, street), attribute(none, window), box5, box2).
property(has, attribute(none, street), attribute(none, window), box5, box2).
property(none, attribute(none, street), attribute(none, none), box5, box4).
property(on, attribute(none, street), attribute(none, street), box5, box6).
property(on, attribute(none, line), attribute(none, bus), box6, box8).
property(has, attribute(none, street), attribute(none, window), box5, box2).
property(has, attribute(none, street), attribute(none, none), box5, box9).
property(on, attribute(none, window), attribute(none, bus), box9, box8).
property(on, attribute(none, window), attribute(none, car), box2, box0).
property(on, attribute(none, window), attribute(none, none), box2, box3).
property(on, attribute(none, window), attribute(none, car), box2, box0).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, window), attribute(none, street), box2, box5).
property(on, attribute(none, window), attribute(none, street), box2, box5).
property(on, attribute(none, window), attribute(none, none), box2, box3).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, people), attribute(none, bus), box9, box8).
property(on, attribute(none, people), attribute(none, street), box9, box5).
property(has, attribute(none, people), attribute(none, window), box9, box9).
property(on, attribute(none, people), attribute(none, bus), box9, box8).
property(on, attribute(none, people), attribute(none, street), box9, box5).
property(on, attribute(none, people), attribute(none, street), box9, box5).
property(on, attribute(none, people), attribute(none, street), box9, box5).
property(on, attribute(none, people), attribute(none, side), box9, box6).
property(on, attribute(none, people), attribute(none, street), box9, box5).
property(on, attribute(none, car), attribute(none, bus), box4, box8).
property(on, attribute(none, car), attribute(none, street), box4, box5).
property(has, attribute(none, people), attribute(none, window), box9, box9).
property(has, attribute(none, car), attribute(none, window), box0, box2).
property(on, attribute(none, car), attribute(none, street), box0, box5).
property(on, attribute(none, people), attribute(none, street), box9, box5).
property(on, attribute(none, car), attribute(none, street), box0, box9).
property(on, attribute(none, people), attribute(none, side), box9, box6).
property(on, attribute(none, people), attribute(none, street), box9, box2).
property(box0, 527.5, 124.5, 179, 89).
property(box1, 425.5, 89.5, 63, 63).
property(box2, 604.5, 131, 89, 44).
property(box3, 276.5, 1.5, 361, 129.5).
property(box4, 521.5, 169.5, 63, 48).
property(box5, 79.5, 20.5, 641, 197).
property(box6, 1.5, 95, 348, 122.5).




is_property(car, vehicle).
is_property(truck, vehicle).
is_property(suv, vehicle).
is_property(minivan, vehicle).
is_property(van, vehicle).
is_property(ambulance, vehicle).
is_property(bus, vehicle).
is_property(motorcycle, vehicle).
is_property(tractor, vehicle).
is_property(train, vehicle).

is_property(road, street).

is_property(sedan, car).
is_property(sports, car).
is_property(coupe, car).
is_property(station_wagon, car).
is_property(hatchback, car).
is_property(convertible, car).
is_property(muscle_car, car).
is_property(smart_car, car).
is_property(taxi, car).
is_property(police_car, car).
is_property(hybrd_car, car).
is_property(volkswagen_beetle,car).

is_property(honda_accord, sedan).
is_property(chevrolet_malibu, sedan).
is_property(toyota_corolla, sedan).

is_property(pickup_truck, truck).
is_property(cement_truck, truck).
is_property(fire_truck, truck).
is_property(tow_truck, truck).
is_property(semi_truck, truck).

is_property(stop_sign,sign).
is_property(yield_sign,sign).
is_property(speed_limit_sign,sign).
is_property(do_not_enter_sign,sign).
is_property(no_parking_sign,sign).
is_property(one_way_sign,sign).
is_property(work_ahead_sign,sign).
is_property(lane_ends_sign,sign).
is_property(school_zone_sign,sign).

is_property(red,color).
is_property(blue,color).
is_property(yellow,color).
is_property(green,color).
is_property(orange,color).
is_property(purple,color).
is_property(white,color).
is_property(black,color).
is_property(gray,color).
is_property(cyan,color).

is_part(window, vehicle).
is_part(license_plate, vehicle).
is_part(tire, vehicle).
is_part(head_light, vehicle).
is_part(bumper, vehicle).
is_part(rear_light, vehicle).
is_part(side_mirror, vehicle).
is_part(door, vehicle).
is_part(door_handle, vehicle).
is_part(line, street).
is_part(line, road).

is_part2(window, V):-is_property(V,vehicle), V \= motorcycle.

select_action(change_lane_right, T):- \+obstruction_right(T).

select_action(change_lane_left, T):- \+obstruction_left(T).

select_action(go_forward, T):- \+obstruction_forward(T).

select_action(brake, T):- obstruction_forward(T),!.

obstruction_forward(T):- property(_,attribute(_,B),_,A,_), property(A,X,Y,W,H), X+W > 300, X+W < 400, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_forward(T):- property(_,attribute(_,B),_,A,_), property(A,X,Y,W,H), X > 300, X < 400, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_forward(T):- property(_,_,attribute(_,B),_,A), property(A,X,Y,W,H), X+W > 300, X+W < 400, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_forward(T):- property(_,_,attribute(_,B),_,A), property(A,X,Y,W,H), X > 300, X < 400, Y+H > 155, \+drivable_object(B), \+in(A,background).

obstruction_left(T):- property(_,attribute(_,B),_,A,_), property(A,X,Y,W,H), X<200, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_left(T):- property(_,_,attribute(_,B),_,A), property(A,X,Y,W,H), X+W<200, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_right(T):- property(_,attribute(_,B),_,A,_), property(A,X,Y,W,H), X>500, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_right(T):- property(_,_,attribute(_,B),_,A), property(A,X,Y,W,H), X+W>500, Y+H > 155, \+drivable_object(B), \+in(A,background).

obstruction_right(T):- property(_,attribute(_,B),_,A,_), property(A,X,Y,W,H), X>500, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_right(T):- property(_,_,attribute(_,B),_,A), property(A,X,Y,W,H), X+W>500, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_right(T):- property(_,attribute(_,B),_,A,_), property(A,X,Y,W,H), X>500, Y+H > 155, \+drivable_object(B), \+in(A,background).
obstruction_right(T):- property(_,_,attribute(_,B),_,A), property(A,X,Y,W,H), X+W>500, Y+H > 155, \+drivable_object(B), \+in(A,background).

in(A,background):-property(in,_,attribute(_,background),A,_).
in(A,background):-near(A,B), property(in,_,attribute(_,background),B,C).

near(A,B):- property(in_front, attribute(_,A), attribute(_,B),_,_).
near(A,B):- property(near, attribute(_,A), attribute(_,B),_,_).
near(A,B):- property(in_front, attribute(_,B), attribute(_,A),_,_).
near(A,B):- property(near, attribute(_,B), attribute(_,A),_,_).

drivable_object(X):- X = street.
drivable_object(X):- X = side.
drivable_object(X):- X = sign, property(on, attribute(_,X), attribute(_,Y),_,_), Y=street.
drivable_object(X):- X = sign, property(on, attribute(_,X), attribute(_,Y),_,_), is_property(Y,street).
drivable_object(X):- is_property(X,street).
drivable_object(X):- is_part(X,street).
drivable_object(X):- is_part(X,Y), is_property(Y,street).

